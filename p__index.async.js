"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[866],{87170:function(Pe,y,n){n.r(y),n.d(y,{default:function(){return ue}});var K=n(9783),O=n.n(K),G=n(15009),Z=n.n(G),Y=n(99289),Q=n.n(Y),U=n(5574),h=n.n(U),o=n(67294),X=n(82346),m=n(92317),P=n(42513),V=n(76292),N=n(78957),$=n(11189),E=n(86927),b=n(31057),S=n(66309),w=n(84611),q=n(80882),_=n(93967),A=n.n(_),s={filterBar:"filterBar___dS2K2",btnType:"btnType___BIUjS",active:"active___mPGu6",tagSelector:"tagSelector___EJ7kb",searchInput:"searchInput___FsK4J","ant-input-group-addon":"ant-input-group-addon___Um6m7","ant-input":"ant-input___cImeR","ant-btn":"ant-btn___TQ58G",articleContainer:"articleContainer___aeSIq",loadingContainer:"loadingContainer___bkPtW",articleListContainer:"articleListContainer___qPcsP",articleCard:"articleCard___l7EBX",articleHeader:"articleHeader___xE3Ro",articleTitleWrapper:"articleTitleWrapper___MgMhk",articleTitle:"articleTitle___Mzirs",tagsContainer:"tagsContainer___iPYFo",articleDescription:"articleDescription___rpfQX",highlight:"highlight___j4c9d",paginationWrapper:"paginationWrapper___bu1eY",totalText:"totalText___fjubY"},ee=n(96974),ae=n(91728),te=n(90489),a=n(85893),r="VMgr",ne=m.Z.Title,re=m.Z.Paragraph,se=m.Z.Text,le=P.Z.Option,ie=V.Z.Search,ce=[{value:"Area",label:"\u6280\u672F"},{value:"Resource",label:"\u8D44\u6E90"},{value:"Project",label:"\u5DE5\u4F5C"},{value:"Life",label:"\u751F\u6D3B"}],oe=function(){var de=(0,o.useState)([]),I=h()(de,2),v=I[0],k=I[1],he=(0,o.useState)(!0),F=h()(he,2),ve=F[0],L=F[1],fe=(0,o.useState)(1),B=h()(fe,2),j=B[0],f=B[1],ge=(0,o.useState)(null),D=h()(ge,2),g=D[0],R=D[1],pe=(0,o.useState)([]),z=h()(pe,2),p=z[0],H=z[1],me=(0,o.useState)(""),W=h()(me,2),u=W[0],C=W[1],T=10,Se=(0,ee.s0)();(0,o.useEffect)(function(){var t=function(){var e=Q()(Z()().mark(function l(){var d,c;return Z()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(L(!0),i.prev=1,location.pathname==="/home"&&localStorage.removeItem("home.json"),d=localStorage.getItem("home.json"),d){i.next=12;break}return i.next=7,te.Z.getCraftHomeJson();case 7:c=i.sent,localStorage.setItem("home.json",JSON.stringify(c)),k(c),i.next=13;break;case 12:k(JSON.parse(d));case 13:i.next=19;break;case 15:i.prev=15,i.t0=i.catch(1),console.error("\u52A0\u8F7D\u5931\u8D25:",i.t0),i.t0 instanceof SyntaxError&&localStorage.removeItem("home.json");case 19:return i.prev=19,L(!1),i.finish(19);case 22:case"end":return i.stop()}},l,null,[[1,15,19,22]])}));return function(){return e.apply(this,arguments)}}();v.length||t()},[]),(0,o.useEffect)(function(){var t=function(){R(null),H([]),C(""),f(1)};return window.addEventListener("resetFilters",t),function(){window.removeEventListener("resetFilters",t)}},[]);var je=(0,o.useMemo)(function(){var t=new Set;return v.forEach(function(e){e.tags&&e.tags.split(",").forEach(function(l){l.trim()&&t.add(l.trim())})}),Array.from(t)},[v]),M=function(e,l){if(!l||!e)return e;var d=e.split(new RegExp("(".concat(l,")"),"gi"));return d.map(function(c,J){return c.toLowerCase()===l.toLowerCase()?(0,a.jsx)("span",{className:s.highlight,_nk:"".concat(r,"11"),children:c},J):c})},x=(0,o.useMemo)(function(){return v.filter(function(t){if(g&&t.type!==g)return!1;if(p.length>0){var e=t.tags?t.tags.split(",").map(function(c){return c.trim()}):[];return p.some(function(c){return e.includes(c)})}if(u){var l=u.toLowerCase(),d=[t.title,t.description,t.type,t.tags].join(" ").toLowerCase();return d.includes(l)}return!0})},[v,g,p,u]),Ce=x.slice((j-1)*T,j*T),Te=function(e){f(e),window.scrollTo({top:0,behavior:"smooth"})},xe=function(e){R(e),f(1)},ye=function(e){H(e?[e]:[]),f(1)},Ze=function(e){C(e),f(1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:s.filterBar,_nk:"".concat(r,"21"),children:[(0,a.jsxs)(N.Z,{size:2,_nk:"".concat(r,"31"),children:[ce.map(function(t){return(0,a.jsx)($.ZP,{type:"text",className:A()(s.btnType,O()({},s.active,g===t.value)),onClick:function(){return xe(t.value)},_nk:"iAr".concat(r,"41"),children:t.label},t.value)}),(0,a.jsx)(P.Z,{value:p[0]||void 0,onChange:ye,allowClear:!0,placeholder:"\u6807\u7B7E",suffixIcon:(0,a.jsx)(q.Z,{_nk:"".concat(r,"61")}),className:s.tagSelector,_nk:"".concat(r,"51"),children:je.map(function(t){return(0,a.jsx)(le,{value:t,_nk:"iAr".concat(r,"71"),children:t},t)})})]}),(0,a.jsx)(ie,{placeholder:"\u641C\u7D22\u6587\u7AE0...",allowClear:!0,enterButton:!0,size:"middle",value:u,onChange:function(e){return C(e.target.value)},onSearch:Ze,className:s.searchInput,_nk:"".concat(r,"81")})]}),(0,a.jsx)("div",{className:s.articleContainer,_nk:"".concat(r,"22"),children:ve?(0,a.jsx)(ae.Z,{_nk:"".concat(r,"91")}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:s.articleListContainer,_nk:"".concat(r,"23"),children:(0,a.jsx)(E.Z,{itemLayout:"vertical",dataSource:Ce,loading:!1,renderItem:function(e){return(0,a.jsx)(E.Z.Item,{style:{borderBottom:"none"},_nk:"".concat(r,"b1"),children:(0,a.jsxs)(b.Z,{className:s.articleCard,_nk:"".concat(r,"c1"),children:[(0,a.jsxs)("div",{className:s.articleHeader,_nk:"".concat(r,"24"),children:[(0,a.jsx)("div",{className:s.articleTitleWrapper,_nk:"".concat(r,"25"),children:(0,a.jsx)(ne,{level:4,className:A()(s.articleTitle,"g_hover_lift"),onClick:function(){Se("/doc/".concat(e.uuid).concat(e.protected?"/true":""))},_nk:"".concat(r,"d1"),children:u?M(e.title,u):e.title})}),(0,a.jsx)("div",{className:s.tagsContainer,_nk:"".concat(r,"26"),children:(0,a.jsxs)(N.Z,{size:[8,16],wrap:!0,align:"start",_nk:"".concat(r,"32"),children:[(0,a.jsx)(S.Z,{color:e.type==="Life"?"magenta":"blue",_nk:"".concat(r,"e1"),children:e.type}),e.tags&&e.tags.split(",").map(function(l){return l.trim()&&(0,a.jsx)(S.Z,{_nk:"".concat(r,"e2"),children:l},l)}),e.protected&&(0,a.jsx)(S.Z,{color:"red",_nk:"".concat(r,"e3"),children:"\u4FDD\u62A4"})]})})]}),(0,a.jsx)(re,{className:s.articleDescription,ellipsis:{rows:3},_nk:"".concat(r,"f1"),children:u?M(e.description,u):e.description})]})})},_nk:"".concat(r,"a1")})}),(0,a.jsxs)("div",{className:s.paginationWrapper,_nk:"".concat(r,"27"),children:[(0,a.jsxs)(se,{className:s.totalText,_nk:"".concat(r,"g1"),children:["\u5171 ",x.length," \u7BC7\u6587\u7AE0"]}),(0,a.jsx)(w.Z,{current:j,pageSize:T,total:x.length,onChange:Te,showSizeChanger:!1,_nk:"".concat(r,"h1")})]})]})})]})},ue=function(){return(0,a.jsx)(X.KeepAlive,{id:"home",_nk:"".concat(r,"i1"),children:(0,a.jsx)(oe,{_nk:"".concat(r,"j1")})})}}}]);
