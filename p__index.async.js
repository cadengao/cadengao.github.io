"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[866],{87170:function(Te,y,t){t.r(y),t.d(y,{default:function(){return ce}});var K=t(9783),M=t.n(K),G=t(15009),P=t.n(G),O=t(99289),Y=t.n(O),Q=t(5574),h=t.n(Q),o=t(67294),U=t(82346),f=t(92317),X=t(7853),V=t(76292),Z=t(78957),$=t(11189),N=t(86927),b=t(31057),p=t(66309),w=t(84611),q=t(93967),F=t.n(q),l={filterBar:"filterBar___dS2K2",btnType:"btnType___BIUjS",active:"active___mPGu6",tagSelector:"tagSelector___EJ7kb",searchInput:"searchInput___FsK4J","ant-input-group-addon":"ant-input-group-addon___Um6m7","ant-input":"ant-input___cImeR","ant-btn":"ant-btn___TQ58G",articleContainer:"articleContainer___aeSIq",loadingContainer:"loadingContainer___bkPtW",articleListContainer:"articleListContainer___qPcsP",articleCard:"articleCard___l7EBX",articleHeader:"articleHeader___xE3Ro",articleTitleWrapper:"articleTitleWrapper___MgMhk",articleTitle:"articleTitle___Mzirs",tagsContainer:"tagsContainer___iPYFo",articleDescription:"articleDescription___rpfQX",highlight:"highlight___j4c9d",paginationWrapper:"paginationWrapper___bu1eY",totalText:"totalText___fjubY"},_=t(96974),ee=t(91728),ae=t(90489),a=t(85893),n="VMgr",te=f.Z.Title,ne=f.Z.Paragraph,re=f.Z.Text,xe=X.Z.Option,se=V.Z.Search,le=[{value:"Area",label:"\u6280\u672F"},{value:"Resource",label:"\u8D44\u6E90"},{value:"Project",label:"\u5DE5\u4F5C"},{value:"Life",label:"\u751F\u6D3B"}],ie=function(){var oe=(0,o.useState)([]),I=h()(oe,2),m=I[0],L=I[1],ue=(0,o.useState)(!0),A=h()(ue,2),de=A[0],E=A[1],he=(0,o.useState)(1),k=h()(he,2),S=k[0],v=k[1],ve=(0,o.useState)(null),B=h()(ve,2),g=B[0],R=B[1],ge=(0,o.useState)([]),D=h()(ge,2),j=D[0],z=D[1],fe=(0,o.useState)(""),H=h()(fe,2),u=H[0],C=H[1],T=10,pe=(0,_.s0)();(0,o.useEffect)(function(){var r=function(){var e=Y()(P()().mark(function i(){var d,c;return P()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(E(!0),s.prev=1,location.pathname==="/home"&&localStorage.removeItem("home.json"),d=localStorage.getItem("home.json"),d){s.next=12;break}return s.next=7,ae.Z.getCraftHomeJson();case 7:c=s.sent,localStorage.setItem("home.json",JSON.stringify(c)),L(c),s.next=13;break;case 12:L(JSON.parse(d));case 13:s.next=19;break;case 15:s.prev=15,s.t0=s.catch(1),console.error("\u52A0\u8F7D\u5931\u8D25:",s.t0),s.t0 instanceof SyntaxError&&localStorage.removeItem("home.json");case 19:return s.prev=19,E(!1),s.finish(19);case 22:case"end":return s.stop()}},i,null,[[1,15,19,22]])}));return function(){return e.apply(this,arguments)}}();m.length||r()},[]),(0,o.useEffect)(function(){var r=function(){R(null),z([]),C(""),v(1)};return window.addEventListener("resetFilters",r),function(){window.removeEventListener("resetFilters",r)}},[]);var W=function(e,i){if(!i||!e)return e;var d=e.split(new RegExp("(".concat(i,")"),"gi"));return d.map(function(c,J){return c.toLowerCase()===i.toLowerCase()?(0,a.jsx)("span",{className:l.highlight,_nk:"".concat(n,"11"),children:c},J):c})},x=(0,o.useMemo)(function(){return m.filter(function(r){if(g&&r.type!==g)return!1;if(j.length>0){var e=r.tags?r.tags.split(",").map(function(c){return c.trim()}):[];return j.some(function(c){return e.includes(c)})}if(u){var i=u.toLowerCase(),d=[r.title,r.description,r.type,r.tags].join(" ").toLowerCase();return d.includes(i)}return!0})},[m,g,j,u]),me=x.slice((S-1)*T,S*T),Se=function(e){v(e),window.scrollTo({top:0,behavior:"smooth"})},je=function(e){R(e),v(1)},Pe=function(e){z(e?[e]:[]),v(1)},Ce=function(e){C(e),v(1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:l.filterBar,_nk:"".concat(n,"21"),children:[(0,a.jsx)(Z.Z,{size:2,_nk:"".concat(n,"31"),children:le.map(function(r){return(0,a.jsx)($.ZP,{type:"text",className:F()(l.btnType,M()({},l.active,g===r.value)),onClick:function(){return je(r.value)},_nk:"iAr".concat(n,"41"),children:r.label},r.value)})}),(0,a.jsx)(se,{placeholder:"\u641C\u7D22\u6587\u7AE0...",allowClear:!0,enterButton:!0,size:"middle",value:u,onChange:function(e){return C(e.target.value)},onSearch:Ce,className:l.searchInput,_nk:"".concat(n,"51")})]}),(0,a.jsx)("div",{className:l.articleContainer,_nk:"".concat(n,"22"),children:de?(0,a.jsx)(ee.Z,{_nk:"".concat(n,"61")}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:l.articleListContainer,_nk:"".concat(n,"23"),children:(0,a.jsx)(N.Z,{itemLayout:"vertical",dataSource:me,loading:!1,renderItem:function(e){return(0,a.jsx)(N.Z.Item,{style:{borderBottom:"none"},_nk:"".concat(n,"81"),children:(0,a.jsxs)(b.Z,{className:l.articleCard,_nk:"".concat(n,"91"),children:[(0,a.jsxs)("div",{className:l.articleHeader,_nk:"".concat(n,"24"),children:[(0,a.jsx)("div",{className:l.articleTitleWrapper,_nk:"".concat(n,"25"),children:(0,a.jsx)(te,{level:4,className:F()(l.articleTitle,"g_hover_lift"),onClick:function(){pe("/doc/".concat(e.uuid).concat(e.protected?"/true":""))},_nk:"".concat(n,"a1"),children:u?W(e.title,u):e.title})}),(0,a.jsx)("div",{className:l.tagsContainer,_nk:"".concat(n,"26"),children:(0,a.jsxs)(Z.Z,{size:[8,16],wrap:!0,align:"start",_nk:"".concat(n,"32"),children:[(0,a.jsx)(p.Z,{color:e.type==="Life"?"magenta":"blue",_nk:"".concat(n,"b1"),children:e.type}),e.tags&&e.tags.split(",").map(function(i){return i.trim()&&(0,a.jsx)(p.Z,{_nk:"".concat(n,"b2"),children:i},i)}),e.protected&&(0,a.jsx)(p.Z,{color:"red",_nk:"".concat(n,"b3"),children:"\u4FDD\u62A4"})]})})]}),(0,a.jsx)(ne,{className:l.articleDescription,ellipsis:{rows:3},_nk:"".concat(n,"c1"),children:u?W(e.description,u):e.description})]})})},_nk:"".concat(n,"71")})}),(0,a.jsxs)("div",{className:l.paginationWrapper,_nk:"".concat(n,"27"),children:[(0,a.jsxs)(re,{className:l.totalText,_nk:"".concat(n,"d1"),children:["\u5171 ",x.length," \u7BC7\u6587\u7AE0"]}),(0,a.jsx)(w.Z,{current:S,pageSize:T,total:x.length,onChange:Se,showSizeChanger:!1,_nk:"".concat(n,"e1")})]})]})})]})},ce=function(){return(0,a.jsx)(U.KeepAlive,{id:"home",_nk:"".concat(n,"f1"),children:(0,a.jsx)(ie,{_nk:"".concat(n,"g1")})})}}}]);
