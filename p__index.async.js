"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[866],{87170:function(pe,x,t){t.r(x),t.d(x,{default:function(){return re}});var H=t(9783),W=t.n(H),J=t(15009),y=t.n(J),K=t(99289),M=t.n(K),G=t(5574),d=t.n(G),i=t(67294),Y=t(82346),f=t(92317),O=t(76292),P=t(78957),Q=t(11189),N=t(86927),U=t(31057),p=t(66309),X=t(48850),b=t(93967),Z=t.n(b),l={filterBar:"filterBar___dS2K2",btnType:"btnType___BIUjS",active:"active___mPGu6",tagSelector:"tagSelector___EJ7kb",searchInput:"searchInput___FsK4J","ant-input-group-addon":"ant-input-group-addon___Um6m7","ant-input":"ant-input___cImeR","ant-btn":"ant-btn___TQ58G",articleContainer:"articleContainer___aeSIq",loadingContainer:"loadingContainer___bkPtW",articleListContainer:"articleListContainer___qPcsP",articleCard:"articleCard___l7EBX",articleHeader:"articleHeader___xE3Ro",articleTitleWrapper:"articleTitleWrapper___MgMhk",articleTitle:"articleTitle___Mzirs",tagsContainer:"tagsContainer___iPYFo",articleDescription:"articleDescription___rpfQX",highlight:"highlight___j4c9d",paginationWrapper:"paginationWrapper___bu1eY",totalText:"totalText___fjubY"},V=t(96974),$=t(91728),w=t(90489),e=t(85893),n="VMgr",q=f.Z.Title,_=f.Z.Paragraph,ee=f.Z.Text,ae=O.Z.Search,te=[{value:"Area",label:"\u6280\u672F"},{value:"Resource",label:"\u8D44\u6E90"},{value:"Project",label:"\u5DE5\u4F5C"},{value:"Life",label:"\u751F\u6D3B"}],ne=function(){var se=(0,i.useState)([]),I=d()(se,2),m=I[0],L=I[1],le=(0,i.useState)(!0),k=d()(le,2),ce=k[0],A=k[1],ie=(0,i.useState)(1),E=d()(ie,2),S=E[0],v=E[1],oe=(0,i.useState)(null),F=d()(oe,2),g=F[0],B=F[1],ue=(0,i.useState)(""),R=d()(ue,2),o=R[0],j=R[1],C=10,de=(0,V.s0)();(0,i.useEffect)(function(){var r=function(){var a=M()(y()().mark(function c(){var h,u;return y()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(A(!0),s.prev=1,location.pathname==="/home"&&localStorage.removeItem("home.json"),h=localStorage.getItem("home.json"),h){s.next=12;break}return s.next=7,w.Z.getCraftHomeJson();case 7:u=s.sent,localStorage.setItem("home.json",JSON.stringify(u)),L(u),s.next=13;break;case 12:L(JSON.parse(h));case 13:s.next=19;break;case 15:s.prev=15,s.t0=s.catch(1),console.error("\u52A0\u8F7D\u5931\u8D25:",s.t0),s.t0 instanceof SyntaxError&&localStorage.removeItem("home.json");case 19:return s.prev=19,A(!1),s.finish(19);case 22:case"end":return s.stop()}},c,null,[[1,15,19,22]])}));return function(){return a.apply(this,arguments)}}();m.length||r()},[]),(0,i.useEffect)(function(){var r=function(){B(null),j(""),v(1)};return window.addEventListener("resetFilters",r),function(){window.removeEventListener("resetFilters",r)}},[]);var D=function(a,c){if(!c||!a)return a;var h=a.split(new RegExp("(".concat(c,")"),"gi"));return h.map(function(u,z){return u.toLowerCase()===c.toLowerCase()?(0,e.jsx)("span",{className:l.highlight,_nk:"".concat(n,"11"),children:u},z):u})},T=(0,i.useMemo)(function(){return m.filter(function(r){if(g&&r.type!==g)return!1;if(o){var a=o.toLowerCase(),c=[r.title,r.description,r.type,r.tags].join(" ").toLowerCase();return c.includes(a)}return!0})},[m,g,o]),he=T.slice((S-1)*C,S*C),ve=function(a){v(a),window.scrollTo({top:0,behavior:"smooth"})},ge=function(a){B(a),v(1)},fe=function(a){j(a),v(1)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:l.filterBar,_nk:"".concat(n,"21"),children:[(0,e.jsx)(P.Z,{size:2,_nk:"".concat(n,"31"),children:te.map(function(r){return(0,e.jsx)(Q.ZP,{type:"text",className:Z()(l.btnType,W()({},l.active,g===r.value)),onClick:function(){return ge(r.value)},_nk:"iAr".concat(n,"41"),children:r.label},r.value)})}),(0,e.jsx)(ae,{placeholder:"\u641C\u7D22\u6587\u7AE0...",allowClear:!0,enterButton:!0,size:"middle",value:o,onChange:function(a){return j(a.target.value)},onSearch:fe,className:l.searchInput,_nk:"".concat(n,"51")})]}),(0,e.jsx)("div",{className:l.articleContainer,_nk:"".concat(n,"22"),children:ce?(0,e.jsx)($.Z,{_nk:"".concat(n,"61")}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:l.articleListContainer,_nk:"".concat(n,"23"),children:(0,e.jsx)(N.Z,{itemLayout:"vertical",dataSource:he,loading:!1,renderItem:function(a){return(0,e.jsx)(N.Z.Item,{style:{borderBottom:"none"},_nk:"".concat(n,"81"),children:(0,e.jsxs)(U.Z,{className:l.articleCard,_nk:"".concat(n,"91"),children:[(0,e.jsxs)("div",{className:l.articleHeader,_nk:"".concat(n,"24"),children:[(0,e.jsx)("div",{className:l.articleTitleWrapper,_nk:"".concat(n,"25"),children:(0,e.jsx)(q,{level:4,className:Z()(l.articleTitle,"g_hover_lift"),onClick:function(){de("/doc/".concat(a.uuid).concat(a.protected?"/true":""))},_nk:"".concat(n,"a1"),children:o?D(a.title,o):a.title})}),(0,e.jsx)("div",{className:l.tagsContainer,_nk:"".concat(n,"26"),children:(0,e.jsxs)(P.Z,{size:[8,16],wrap:!0,align:"start",_nk:"".concat(n,"32"),children:[(0,e.jsx)(p.Z,{color:a.type==="Life"?"magenta":"blue",_nk:"".concat(n,"b1"),children:a.type}),a.tags&&a.tags.split(",").map(function(c){return c.trim()&&(0,e.jsx)(p.Z,{_nk:"".concat(n,"b2"),children:c},c)}),a.protected&&(0,e.jsx)(p.Z,{color:"red",_nk:"".concat(n,"b3"),children:"\u4FDD\u62A4"})]})})]}),(0,e.jsx)(_,{className:l.articleDescription,ellipsis:{rows:3},_nk:"".concat(n,"c1"),children:o?D(a.description,o):a.description})]})})},_nk:"".concat(n,"71")})}),(0,e.jsxs)("div",{className:l.paginationWrapper,_nk:"".concat(n,"27"),children:[(0,e.jsxs)(ee,{className:l.totalText,_nk:"".concat(n,"d1"),children:["\u5171 ",T.length," \u7BC7\u6587\u7AE0"]}),(0,e.jsx)(X.Z,{current:S,pageSize:C,total:T.length,onChange:ve,showSizeChanger:!1,_nk:"".concat(n,"e1")})]})]})})]})},re=function(){return(0,e.jsx)(Y.KeepAlive,{id:"home",_nk:"".concat(n,"f1"),children:(0,e.jsx)(ne,{_nk:"".concat(n,"g1")})})}}}]);
