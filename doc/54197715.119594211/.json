{
  "UUID": "54197715.119594211",
  "DocId": 0,
  "Type": null,
  "Format": null,
  "Title": "WPF-MVVM(\u4F7F\u7528MvvmLight\u63D2\u4EF6)\u3010Area\u3011",
  "TagDatas": null,
  "Slug": null,
  "Tags": null,
  "Description": null,
  "Cover": null,
  "BookId": 0,
  "BookName": null,
  "Public": 0,
  "WordCount": 0,
  "CreatedAt": "0001-01-01T00:00:00",
  "UpdatedAt": "0001-01-01T00:00:00",
  "BodyHtml": "\u003C!doctype html\u003E\u003Cdiv class=\u0022lake-content\u0022 typography=\u0022classic\u0022\u003E\u003Ch1 id=\u0022fLXK4\u0022\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(64, 64, 64)\u0022\u003EMVVM\u4ECB\u7ECD\u003C/span\u003E\u003C/h1\u003E\u003Cp id=\u0022ufc5e08c0\u0022 class=\u0022ne-p\u0022\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(64, 64, 64); font-size: 16px\u0022\u003E\u5176\u5B9E\u5C31\u662F\uFF1AModel \u3001view\u3001viewmodel\u4E09\u4E2A\u7684\u7B80\u79F0\uFF0C\u5C31\u50CFMVC\u4E00\u6837\u3002\u003C/span\u003E\u003C/p\u003E\u003Cp id=\u0022u0b76fa39\u0022 class=\u0022ne-p\u0022\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(64, 64, 64); font-size: 16px\u0022\u003Emodel\u5C31\u662F\u6A21\u578B\u3002view\u5C31\u662F\u89C6\u56FE\u3002viewmodel\u5C31\u662F\u548Cview\u8FDB\u884C\u7ED1\u5B9A\u7684\u3002\u003C/span\u003E\u003C/p\u003E\u003Cp id=\u0022u31ed2480\u0022 class=\u0022ne-p\u0022\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(0, 0, 0); font-size: 14px\u0022\u003EMVVM\u793A\u610F\u56FE\u5982\u4E0B\u6240\u793A\uFF1A\u003C/span\u003E\u003C/p\u003E\u003Cp id=\u0022u0a8c2d41\u0022 class=\u0022ne-p\u0022\u003E\u003Cimg src=\u0022https://raw.githubusercontent.com/cadengao/cadengao.github.io/blog_file//doc/54197715.119594211/image/0.png\u0022 width=\u0022673\u0022 id=\u0022ub57c3b62\u0022 class=\u0022ne-image\u0022\u003E\u003C/p\u003E\u003Cp id=\u0022udc100748\u0022 class=\u0022ne-p\u0022\u003E\u003Cimg src=\u0022https://raw.githubusercontent.com/cadengao/cadengao.github.io/blog_file//doc/54197715.119594211/image/1.png\u0022 width=\u0022374\u0022 id=\u0022u2863a747\u0022 class=\u0022ne-image\u0022\u003E\u003C/p\u003E\u003Ch1 id=\u0022dlKo5\u0022\u003E\u003Cspan class=\u0022ne-text\u0022\u003E\u5B89\u88C5MvvmLight\u63D2\u4EF6\u003C/span\u003E\u003C/h1\u003E\u003Cp id=\u0022u81c92e46\u0022 class=\u0022ne-p\u0022\u003E\u003Cimg src=\u0022https://raw.githubusercontent.com/cadengao/cadengao.github.io/blog_file//doc/54197715.119594211/image/2.png\u0022 width=\u00221332\u0022 id=\u0022u315da18d\u0022 class=\u0022ne-image\u0022\u003E\u003C/p\u003E\u003Cp id=\u0022ua58075e0\u0022 class=\u0022ne-p\u0022\u003E\u003Cimg src=\u0022https://raw.githubusercontent.com/cadengao/cadengao.github.io/blog_file//doc/54197715.119594211/image/3.png\u0022 width=\u00221903\u0022 id=\u0022u97eee1e3\u0022 class=\u0022ne-image\u0022\u003E\u003C/p\u003E\u003Ch1 id=\u0022KcKZg\u0022\u003E\u003Cspan class=\u0022ne-text\u0022\u003EMVVM\u5F00\u53D1\u6B65\u9AA4\u003C/span\u003E\u003C/h1\u003E\u003Cp id=\u0022u1ee5f213\u0022 class=\u0022ne-p\u0022\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(0, 0, 0); font-size: 16px\u0022\u003E\u4E3B\u8981\u901A\u8FC7MVVM\u5B9E\u73B0\u6570\u636E\u7684CRUD\u3010\u589E\u5220\u6539\u67E5\u3011\u57FA\u7840\u64CD\u4F5C\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A\u003C/span\u003E\u003C/p\u003E\u003Col class=\u0022ne-ol\u0022\u003E\u003Cli id=\u0022u5a08a216\u0022 data-lake-index-type=\u00220\u0022\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(128, 0, 128)\u0022\u003E\u521B\u5EFAModel\u5C42\u003C/span\u003E\u003C/li\u003E\u003C/ol\u003E\u003Cp id=\u0022u96ff0fb9\u0022 class=\u0022ne-p\u0022\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(0, 0, 0); font-size: 14px\u0022\u003E\u672C\u4F8B\u4E3B\u8981\u662F\u5BF9\u5B66\u751F\u4FE1\u606F\u7684\u589E\u5220\u6539\u67E5\uFF0C\u6240\u4EE5\u521B\u5EFAStudent\u6A21\u578B\u7C7B\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A\u003C/span\u003E\u003C/p\u003E\u003Cpre data-language=\u0022csharp\u0022 id=\u0022g0V04\u0022 class=\u0022ne-codeblock language-csharp\u0022\u003E\u003Ccode\u003Eusing System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing System.Threading.Tasks;\n\nnamespace WpfMVVM.Models\n{\n    /// \u0026lt;summary\u0026gt;\n    /// \u5B66\u751F\u7C7B\n    /// \u0026lt;/summary\u0026gt;\n    public class Student\n    {\n        /// \u0026lt;summary\u0026gt;\n        /// \u552F\u4E00\u6807\u8BC6\n        /// \u0026lt;/summary\u0026gt;\n        public int Id { get; set; }\n\n        /// \u0026lt;summary\u0026gt;\n        /// \u5B66\u751F\u59D3\u540D\n        /// \u0026lt;/summary\u0026gt;\n        public string Name { get; set; }\n\n        /// \u0026lt;summary\u0026gt;\n        /// \u5E74\u9F84\n        /// \u0026lt;/summary\u0026gt;\n        public int Age { get; set; }\n\n        /// \u0026lt;summary\u0026gt;\n        /// \u73ED\u7EA7\n        /// \u0026lt;/summary\u0026gt;\n        public string Classes { get; set; }\n    }\n}\n\u003C/code\u003E\u003C/pre\u003E\u003Col start=\u00222\u0022 class=\u0022ne-ol\u0022\u003E\u003Cli id=\u0022ub70e1ae7\u0022 data-lake-index-type=\u00220\u0022\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(128, 0, 128)\u0022\u003E\u521B\u5EFADAL\u5C42\u003C/span\u003E\u003C/li\u003E\u003C/ol\u003E\u003Cp id=\u0022ufc91e468\u0022 class=\u0022ne-p\u0022\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(0, 0, 0); font-size: 14px\u0022\u003E\u4E3A\u4E86\u7B80\u5316\u793A\u4F8B\uFF0C\u6A21\u62DF\u6570\u636E\u5E93\u64CD\u4F5C\uFF0C\u6784\u5EFA\u57FA\u7840\u6570\u636E\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A\u003C/span\u003E\u003C/p\u003E\u003Cpre data-language=\u0022csharp\u0022 id=\u0022MC6Ji\u0022 class=\u0022ne-codeblock language-csharp\u0022\u003E\u003Ccode\u003Eusing System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Text;\nusing System.Threading.Tasks;\nusing WpfMVVM.Models;\n\nnamespace WpfMVVM.DAL\n{\n    public class LocalDb\n    {\n        private List\u0026lt;Student\u0026gt; students;\n\n        public LocalDb()\n        {\n            init();\n        }\n\n        /// \u0026lt;summary\u0026gt;\n        /// \u521D\u59CB\u5316\u6570\u636E\n        /// \u0026lt;/summary\u0026gt;\n        private void init()\n        {\n            students = new List\u0026lt;Student\u0026gt;();\n            for (int i = 0; i \u0026lt; 30; i\u002B\u002B)\n            {\n                students.Add(new Student()\n                {\n                    Id = i,\n                    Name = string.Format(\u0026quot;\u5B66\u751F{0}\u0026quot;, i),\n                    Age = new Random(i).Next(0, 100),\n                    Classes = i % 2 == 0 ? \u0026quot;\u4E00\u73ED\u0026quot; : \u0026quot;\u4E8C\u73ED\u0026quot;\n                });\n            }\n        }\n\n        /// \u0026lt;summary\u0026gt;\n        /// \u67E5\u8BE2\u6570\u636E\n        /// \u0026lt;/summary\u0026gt;\n        /// \u0026lt;returns\u0026gt;\u0026lt;/returns\u0026gt;\n        public List\u0026lt;Student\u0026gt; Query()\n        {\n            return students;\n        }\n\n        /// \u0026lt;summary\u0026gt;\n        /// \u6309\u540D\u5B57\u67E5\u8BE2\n        /// \u0026lt;/summary\u0026gt;\n        /// \u0026lt;param name=\u0026quot;name\u0026quot;\u0026gt;\u0026lt;/param\u0026gt;\n        /// \u0026lt;returns\u0026gt;\u0026lt;/returns\u0026gt;\n        public List\u0026lt;Student\u0026gt; QueryByName(string name)\n        {\n            return students.Where((t) =\u0026gt; t.Name.Contains(name)).ToList();//FindAll((t) =\u0026gt; t.Name.Contains(name));\n        }\n\n        public Student QueryById(int Id)\n        {\n            var student = students.FirstOrDefault((t) =\u0026gt; t.Id == Id);\n            if (student != null)\n            {\n                return new Student()\n                {\n                    Id = student.Id,\n                    Name = student.Name,\n                    Age = student.Age,\n                    Classes = student.Classes\n                };\n            }\n            return null;\n        }\n\n\n        /// \u0026lt;summary\u0026gt;\n        /// \u65B0\u589E\u5B66\u751F\n        /// \u0026lt;/summary\u0026gt;\n        /// \u0026lt;param name=\u0026quot;student\u0026quot;\u0026gt;\u0026lt;/param\u0026gt;\n        public void AddStudent(Student student)\n        {\n            if (student != null)\n            {\n                students.Add(student);\n            }\n        }\n\n        /// \u0026lt;summary\u0026gt;\n        /// \u5220\u9664\u5B66\u751F\n        /// \u0026lt;/summary\u0026gt;\n        /// \u0026lt;param name=\u0026quot;Id\u0026quot;\u0026gt;\u0026lt;/param\u0026gt;\n        public void DelStudent(int Id)\n        {\n            var student = students.FirstOrDefault((t) =\u0026gt; t.Id == Id); //students.Find((t) =\u0026gt; t.Id == Id);\n            if (student != null)\n            {\n                students.Remove(student);\n            }\n\n        }\n    }\n\n}\u003C/code\u003E\u003C/pre\u003E\u003Col start=\u00223\u0022 class=\u0022ne-ol\u0022\u003E\u003Cli id=\u0022uc80bd9bf\u0022 data-lake-index-type=\u00220\u0022\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(128, 0, 128)\u0022\u003E\u521B\u5EFAView\u5C42\u003C/span\u003E\u003C/li\u003E\u003C/ol\u003E\u003Cp id=\u0022u36b4bc46\u0022 class=\u0022ne-p\u0022\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(0, 0, 0); font-size: 14px\u0022\u003EView\u5C42\u4E0E\u7528\u6237\u8FDB\u884C\u4EA4\u4E92\uFF0C\u7528\u6237\u6570\u636E\u7684\u5C55\u793A\uFF0C\u53CA\u4E8B\u4EF6\u7684\u54CD\u5E94\u3002\u5728\u672C\u4F8B\u4E2D\uFF0CView\u5C42\u4E3B\u8981\u6709\u6570\u636E\u67E5\u8BE2\u5C55\u793A\uFF0C\u65B0\u589E\u53CA\u7F16\u8F91\u9875\u9762\u3002\u003C/span\u003E\u003C/p\u003E\u003Cp id=\u0022uc7ebd77f\u0022 class=\u0022ne-p\u0022\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(0, 0, 0); font-size: 14px\u0022\u003E\u5728View\u5C42\uFF0C\u4E3B\u8981\u662F\u547D\u4EE4\u7684\u7ED1\u5B9A\uFF0C\u53CA\u6570\u636E\u7684\u7ED1\u5B9A\u3002\u003C/span\u003E\u003C/p\u003E\u003Col class=\u0022ne-list-wrap\u0022\u003E\u003Col ne-level=\u00221\u0022 data-index-type=\u00222\u0022 class=\u0022ne-ol\u0022\u003E\u003Cli id=\u0022u18ff5a23\u0022 data-lake-index-type=\u00222\u0022\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(0, 0, 0); font-size: 14px\u0022\u003E\u5728\u003C/span\u003E\u003Ccode class=\u0022ne-code\u0022\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(0, 0, 0); font-size: 14px\u0022\u003EDataGridTextColum\u003C/span\u003E\u003C/code\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(0, 0, 0); font-size: 14px\u0022\u003E\u4E2D\u901A\u8FC7\u003C/span\u003E\u003Ccode class=\u0022ne-code\u0022\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(0, 0, 0); font-size: 14px\u0022\u003EBinding=\u0026quot;{Binding Id}\u003C/span\u003E\u003C/code\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(0, 0, 0); font-size: 14px\u0022\u003E\u7684\u5F62\u5F0F\u7ED1\u5B9A\u8981\u5C55\u793A\u7684\u5217\u5C5E\u6027\u540D\u3002\u003C/span\u003E\u003C/li\u003E\u003Cli id=\u0022u4bf5e16f\u0022 data-lake-index-type=\u00222\u0022\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(0, 0, 0); font-size: 14px\u0022\u003E\u5728\u003C/span\u003E\u003Ccode class=\u0022ne-code\u0022\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(0, 0, 0); font-size: 14px\u0022\u003EButto\u003C/span\u003E\u003C/code\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(0, 0, 0); font-size: 14px\u0022\u003E\u6309\u94AE\u4E0A\u901A\u8FC7\u003C/span\u003E\u003Ccode class=\u0022ne-code\u0022\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(0, 0, 0); font-size: 14px\u0022\u003ECommand=\u0026quot;{Binding AddCommand}\u003C/span\u003E\u003C/code\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(0, 0, 0); font-size: 14px\u0022\u003E\u7684\u5F62\u5F0F\u7ED1\u5B9A\u8981\u54CD\u5E94\u7684\u547D\u4EE4\u3002\u003C/span\u003E\u003C/li\u003E\u003Cli id=\u0022ua46e7348\u0022 data-lake-index-type=\u00222\u0022\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(0, 0, 0); font-size: 14px\u0022\u003E\u5728\u003C/span\u003E\u003Ccode class=\u0022ne-code\u0022\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(0, 0, 0); font-size: 14px\u0022\u003ETextBo\u003C/span\u003E\u003C/code\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(0, 0, 0); font-size: 14px\u0022\u003E\u6587\u672C\u6846\u4E2D\u901A\u8FC7\u003C/span\u003E\u003Ccode class=\u0022ne-code\u0022\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(0, 0, 0); font-size: 14px\u0022\u003EText=\u0026quot;{Binding Search}\u003C/span\u003E\u003C/code\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(0, 0, 0); font-size: 14px\u0022\u003E\u7684\u5F62\u5F0F\u7ED1\u5B9A\u67E5\u8BE2\u6761\u4EF6\u5C5E\u6027\u3002\u003C/span\u003E\u003C/li\u003E\u003C/ol\u003E\u003C/ol\u003E\u003Cp id=\u0022u27d0d232\u0022 class=\u0022ne-p\u0022\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(0, 0, 0); font-size: 14px\u0022\u003E\u6570\u636E\u5C55\u793A\u7A97\u53E3\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A\u003C/span\u003E\u003C/p\u003E\u003Cpre data-language=\u0022xml\u0022 id=\u0022xfmp8\u0022 class=\u0022ne-codeblock language-xml\u0022\u003E\u003Ccode\u003E\u0026lt;Window x:Class=\u0026quot;WpfMVVM.MainWindow\u0026quot;\n  xmlns=\u0026quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation\u0026quot;\n  xmlns:x=\u0026quot;http://schemas.microsoft.com/winfx/2006/xaml\u0026quot;\n  xmlns:d=\u0026quot;http://schemas.microsoft.com/expression/blend/2008\u0026quot;\n  xmlns:mc=\u0026quot;http://schemas.openxmlformats.org/markup-compatibility/2006\u0026quot;\n  xmlns:local=\u0026quot;clr-namespace:WpfMVVM\u0026quot;\n  mc:Ignorable=\u0026quot;d\u0026quot;\n  Title=\u0026quot;MainWindow\u0026quot; Height=\u0026quot;450\u0026quot; Width=\u0026quot;800\u0026quot;\u0026gt;\n  \u0026lt;Grid\u0026gt;\n    \u0026lt;Grid.RowDefinitions\u0026gt;\n      \u0026lt;RowDefinition Height=\u0026quot;80\u0026quot;\u0026gt;\u0026lt;/RowDefinition\u0026gt;\n      \u0026lt;RowDefinition Height=\u0026quot;*\u0026quot;\u0026gt;\u0026lt;/RowDefinition\u0026gt;\n    \u0026lt;/Grid.RowDefinitions\u0026gt;\n    \u0026lt;StackPanel Orientation=\u0026quot;Horizontal\u0026quot; Grid.Row=\u0026quot;0\u0026quot; Margin=\u0026quot;5\u0026quot; VerticalAlignment=\u0026quot;Center\u0026quot;\u0026gt;\n      \u0026lt;TextBlock Text=\u0026quot;\u59D3\u540D\uFF1A\u0026quot; Margin=\u0026quot;10\u0026quot; Padding=\u0026quot;5\u0026quot;\u0026gt;\u0026lt;/TextBlock\u0026gt;\n      \u0026lt;TextBox x:Name=\u0026quot;sname\u0026quot; Text=\u0026quot;{Binding Search}\u0026quot; Width=\u0026quot;120\u0026quot; Margin=\u0026quot;10\u0026quot; Padding=\u0026quot;5\u0026quot;\u0026gt;\u0026lt;/TextBox\u0026gt;\n      \u0026lt;Button x:Name=\u0026quot;btnQuery\u0026quot; Content=\u0026quot;\u67E5\u8BE2\u0026quot; Margin=\u0026quot;10\u0026quot; Padding=\u0026quot;5\u0026quot; Width=\u0026quot;80\u0026quot; Command=\u0026quot;{Binding QueryCommand}\u0026quot;\u0026gt;\u0026lt;/Button\u0026gt;\n      \u0026lt;Button x:Name=\u0026quot;btnReset\u0026quot; Content=\u0026quot;\u91CD\u7F6E\u0026quot; Margin=\u0026quot;10\u0026quot; Padding=\u0026quot;5\u0026quot; Width=\u0026quot;80\u0026quot; Command=\u0026quot;{Binding ResetCommand}\u0026quot;\u0026gt;\u0026lt;/Button\u0026gt;\n      \u0026lt;Button x:Name=\u0026quot;btnAdd\u0026quot; Content=\u0026quot;\u521B\u5EFA\u0026quot; Margin=\u0026quot;10\u0026quot; Padding=\u0026quot;5\u0026quot; Width=\u0026quot;80\u0026quot;  Command=\u0026quot;{Binding AddCommand}\u0026quot;\u0026gt;\u0026lt;/Button\u0026gt;\n    \u0026lt;/StackPanel\u0026gt;\n    \u0026lt;DataGrid x:Name=\u0026quot;dgInfo\u0026quot; Grid.Row=\u0026quot;1\u0026quot; AutoGenerateColumns=\u0026quot;False\u0026quot; CanUserAddRows=\u0026quot;False\u0026quot; CanUserSortColumns=\u0026quot;False\u0026quot; Margin=\u0026quot;10\u0026quot; ItemsSource=\u0026quot;{Binding GridModelList}\u0026quot;\u0026gt;\n      \u0026lt;DataGrid.Columns\u0026gt;\n        \u0026lt;DataGridTextColumn Header=\u0026quot;Id\u0026quot; Width=\u0026quot;100\u0026quot;  Binding=\u0026quot;{Binding Id}\u0026quot;\u0026gt;\u0026lt;/DataGridTextColumn\u0026gt;\n        \u0026lt;DataGridTextColumn Header=\u0026quot;\u59D3\u540D\u0026quot; Width=\u0026quot;100\u0026quot; Binding=\u0026quot;{Binding Name}\u0026quot;\u0026gt;\u0026lt;/DataGridTextColumn\u0026gt;\n        \u0026lt;DataGridTextColumn Header=\u0026quot;\u5E74\u9F84\u0026quot; Width=\u0026quot;100\u0026quot; Binding=\u0026quot;{Binding Age}\u0026quot;\u0026gt;\u0026lt;/DataGridTextColumn\u0026gt;\n        \u0026lt;DataGridTextColumn Header=\u0026quot;\u73ED\u7EA7\u0026quot; Width=\u0026quot;100\u0026quot; Binding=\u0026quot;{Binding Classes}\u0026quot;\u0026gt;\u0026lt;/DataGridTextColumn\u0026gt;\n        \u0026lt;DataGridTemplateColumn Header=\u0026quot;\u64CD\u4F5C\u0026quot; Width=\u0026quot;*\u0026quot;\u0026gt;\n          \u0026lt;DataGridTemplateColumn.CellTemplate\u0026gt;\n            \u0026lt;DataTemplate\u0026gt;\n              \u0026lt;StackPanel Orientation=\u0026quot;Horizontal\u0026quot; VerticalAlignment=\u0026quot;Center\u0026quot; HorizontalAlignment=\u0026quot;Center\u0026quot;\u0026gt;\n                \u0026lt;Button x:Name=\u0026quot;edit\u0026quot; Content=\u0026quot;\u7F16\u8F91\u0026quot; Width=\u0026quot;60\u0026quot; Margin=\u0026quot;3\u0026quot; Height=\u0026quot;25\u0026quot; CommandParameter=\u0026quot;{Binding Id}\u0026quot; Command=\u0026quot;{Binding DataContext.EditCommand, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=DataGrid}}\u0026quot;\u0026gt;\u0026lt;/Button\u0026gt;\n                \u0026lt;Button x:Name=\u0026quot;delete\u0026quot; Content=\u0026quot;\u5220\u9664\u0026quot; Width=\u0026quot;60\u0026quot; Margin=\u0026quot;3\u0026quot; Height=\u0026quot;25\u0026quot;  CommandParameter=\u0026quot;{Binding Id}\u0026quot; Command=\u0026quot;{Binding DataContext.DeleteCommand, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=DataGrid}}\u0026quot;\u0026gt;\u0026lt;/Button\u0026gt;\n              \u0026lt;/StackPanel\u0026gt;\n            \u0026lt;/DataTemplate\u0026gt;\n          \u0026lt;/DataGridTemplateColumn.CellTemplate\u0026gt;\n        \u0026lt;/DataGridTemplateColumn\u0026gt;\n      \u0026lt;/DataGrid.Columns\u0026gt;\n    \u0026lt;/DataGrid\u0026gt;\n  \u0026lt;/Grid\u0026gt;\n\u0026lt;/Window\u0026gt;\u003C/code\u003E\u003C/pre\u003E\u003Cp id=\u0022ueed2708c\u0022 class=\u0022ne-p\u0022\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(0, 0, 0); font-size: 14px\u0022\u003E\u65B0\u589E\u53CA\u7F16\u8F91\u9875\u9762\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A\u003C/span\u003E\u003C/p\u003E\u003Cpre data-language=\u0022xml\u0022 id=\u0022fGdvs\u0022 class=\u0022ne-codeblock language-xml\u0022\u003E\u003Ccode\u003E\u0026lt;Window x:Class=\u0026quot;WpfMVVM.Views.StudentWindow\u0026quot;\n  xmlns=\u0026quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation\u0026quot;\n  xmlns:x=\u0026quot;http://schemas.microsoft.com/winfx/2006/xaml\u0026quot;\n  xmlns:d=\u0026quot;http://schemas.microsoft.com/expression/blend/2008\u0026quot;\n  xmlns:mc=\u0026quot;http://schemas.openxmlformats.org/markup-compatibility/2006\u0026quot;\n  xmlns:local=\u0026quot;clr-namespace:WpfMVVM.Views\u0026quot;\n  mc:Ignorable=\u0026quot;d\u0026quot;\n  Title=\u0026quot;StudentWindow\u0026quot; Height=\u0026quot;440\u0026quot; Width=\u0026quot;500\u0026quot; AllowsTransparency=\u0026quot;False\u0026quot; WindowStartupLocation=\u0026quot;CenterScreen\u0026quot; WindowStyle=\u0026quot;None\u0026quot;\u0026gt;\n  \u0026lt;Grid\u0026gt;\n    \u0026lt;Grid.RowDefinitions\u0026gt;\n      \u0026lt;RowDefinition Height=\u0026quot;60\u0026quot;\u0026gt;\u0026lt;/RowDefinition\u0026gt;\n      \u0026lt;RowDefinition\u0026gt;\u0026lt;/RowDefinition\u0026gt;\n      \u0026lt;RowDefinition Height=\u0026quot;60\u0026quot;\u0026gt;\u0026lt;/RowDefinition\u0026gt;\n    \u0026lt;/Grid.RowDefinitions\u0026gt;\n    \u0026lt;TextBlock FontSize=\u0026quot;30\u0026quot; Margin=\u0026quot;10\u0026quot;\u0026gt;\u4FEE\u6539\u5B66\u751F\u4FE1\u606F\u0026lt;/TextBlock\u0026gt;\n    \u0026lt;StackPanel Grid.Row=\u0026quot;1\u0026quot; Orientation=\u0026quot;Vertical\u0026quot;\u0026gt;\n      \u0026lt;TextBlock FontSize=\u0026quot;20\u0026quot; Margin=\u0026quot;10\u0026quot; Padding=\u0026quot;5\u0026quot;\u0026gt;\u59D3\u540D\u0026lt;/TextBlock\u0026gt;\n      \u0026lt;TextBox x:Name=\u0026quot;txtName\u0026quot; FontSize=\u0026quot;20\u0026quot;  Padding=\u0026quot;5\u0026quot; Text=\u0026quot;{Binding Model.Name}\u0026quot;\u0026gt;\u0026lt;/TextBox\u0026gt;\n      \u0026lt;TextBlock FontSize=\u0026quot;20\u0026quot; Margin=\u0026quot;10\u0026quot;  Padding=\u0026quot;5\u0026quot;\u0026gt;\u5E74\u9F84\u0026lt;/TextBlock\u0026gt;\n      \u0026lt;TextBox x:Name=\u0026quot;txtAge\u0026quot; FontSize=\u0026quot;20\u0026quot;  Padding=\u0026quot;5\u0026quot; Text=\u0026quot;{Binding Model.Age}\u0026quot;\u0026gt;\u0026lt;/TextBox\u0026gt;\n      \u0026lt;TextBlock FontSize=\u0026quot;20\u0026quot; Margin=\u0026quot;10\u0026quot;  Padding=\u0026quot;5\u0026quot;\u0026gt;\u73ED\u7EA7\u0026lt;/TextBlock\u0026gt;\n      \u0026lt;TextBox x:Name=\u0026quot;txtClasses\u0026quot; FontSize=\u0026quot;20\u0026quot;  Padding=\u0026quot;5\u0026quot; Text=\u0026quot;{Binding Model.Classes}\u0026quot;\u0026gt;\u0026lt;/TextBox\u0026gt;\n    \u0026lt;/StackPanel\u0026gt;\n    \u0026lt;StackPanel Grid.Row=\u0026quot;2\u0026quot; Orientation=\u0026quot;Horizontal\u0026quot; HorizontalAlignment=\u0026quot;Right\u0026quot;\u0026gt;\n      \u0026lt;Button x:Name=\u0026quot;btnSave\u0026quot; Content=\u0026quot;\u4FDD\u5B58\u0026quot; Margin=\u0026quot;10\u0026quot; FontSize=\u0026quot;20\u0026quot; Width=\u0026quot;100\u0026quot; Click=\u0026quot;btnSave_Click\u0026quot; \u0026gt;\u0026lt;/Button\u0026gt;\n      \u0026lt;Button x:Name=\u0026quot;btnCancel\u0026quot; Content=\u0026quot;\u53D6\u6D88\u0026quot; Margin=\u0026quot;10\u0026quot; FontSize=\u0026quot;20\u0026quot; Width=\u0026quot;100\u0026quot; Click=\u0026quot;btnCancel_Click\u0026quot; \u0026gt;\u0026lt;/Button\u0026gt;\n    \u0026lt;/StackPanel\u0026gt;\n  \u0026lt;/Grid\u0026gt;\n\u0026lt;/Window\u0026gt;\u003C/code\u003E\u003C/pre\u003E\u003Col start=\u00224\u0022 class=\u0022ne-ol\u0022\u003E\u003Cli id=\u0022u37234057\u0022 data-lake-index-type=\u00220\u0022\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(128, 0, 128)\u0022\u003E\u521B\u5EFAViewModel\u5C42\u003C/span\u003E\u003C/li\u003E\u003C/ol\u003E\u003Cp id=\u0022uff9d9c2e\u0022 class=\u0022ne-p\u0022\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(0, 0, 0); font-size: 14px\u0022\u003EViewModel\u5C42\u662FMVVM\u7684\u6838\u5FC3\u6240\u5728\uFF0C\u8D77\u5230\u627F\u4E0A\u542F\u4E0B\u7684\u4F5C\u7528\u3002ViewModel\u9700\u8981\u7EE7\u627FGalaSoft.MvvmLight.ViewModelBase\u57FA\u7C7B\u3002\u003C/span\u003E\u003C/p\u003E\u003Cp id=\u0022u57c81a67\u0022 class=\u0022ne-p\u0022\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(0, 0, 0); font-size: 14px\u0022\u003EViewModel\u4E2D\u5C5E\u6027\u5B9E\u73B0\u6570\u636E\u7684\u7ED1\u5B9A\uFF0C\u547D\u4EE4\u5B9E\u73B0\u7528\u6237\u4EA4\u4E92\u7684\u54CD\u5E94\u3002\u5982\u4E0B\u6240\u793A\uFF1A\u003C/span\u003E\u003C/p\u003E\u003Cpre data-language=\u0022csharp\u0022 id=\u0022iGyYR\u0022 class=\u0022ne-codeblock language-csharp\u0022\u003E\u003Ccode\u003Eusing GalaSoft.MvvmLight;\nusing GalaSoft.MvvmLight.Command;\nusing System.Collections.Generic;\nusing System.Collections.ObjectModel;\nusing System.Linq;\nusing System.Windows;\nusing WpfMVVM.DAL;\nusing WpfMVVM.Models;\nusing WpfMVVM.Views;\n\nnamespace WpfMVVM.ViewModel\n{\n    public class MainViewModel : ViewModelBase\n    {\n        #region \u5C5E\u6027\u53CA\u6784\u9020\u51FD\u6570\n\n        private LocalDb localDb;\n\n        private ObservableCollection\u0026lt;Student\u0026gt; gridModelList;\n\n        public ObservableCollection\u0026lt;Student\u0026gt; GridModelList\n        {\n            get { return gridModelList; }\n            set\n            {\n                gridModelList = value;\n                RaisePropertyChanged();\n            }\n        }\n\n        /// \u0026lt;summary\u0026gt;\n        /// \u67E5\u8BE2\u6761\u4EF6\n        /// \u0026lt;/summary\u0026gt;\n        private string search;\n\n        public string Search\n        {\n            get { return search; }\n            set\n            {\n                search = value;\n                RaisePropertyChanged();\n            }\n        }\n\n\n        /// \u0026lt;summary\u0026gt;\n        ///\n        /// \u0026lt;/summary\u0026gt;\n        public MainViewModel()\n        {\n            localDb = new LocalDb();\n            QueryCommand = new RelayCommand(this.Query);\n            ResetCommand = new RelayCommand(this.Reset);\n            EditCommand = new RelayCommand\u0026lt;int\u0026gt;(this.Edit);\n            DeleteCommand = new RelayCommand\u0026lt;int\u0026gt;(this.Delete);\n            AddCommand = new RelayCommand(this.Add);\n        }\n\n        #endregion\n\n        #region command\n\n        /// \u0026lt;summary\u0026gt;\n        /// \u67E5\u8BE2\u547D\u4EE4\n        /// \u0026lt;/summary\u0026gt;\n        public RelayCommand QueryCommand { get; set; }\n\n        /// \u0026lt;summary\u0026gt;\n        /// \u91CD\u7F6E\u547D\u4EE4\n        /// \u0026lt;/summary\u0026gt;\n        public RelayCommand ResetCommand { get; set; }\n\n        /// \u0026lt;summary\u0026gt;\n        /// \u7F16\u8F91\n        /// \u0026lt;/summary\u0026gt;\n        public RelayCommand\u0026lt;int\u0026gt; EditCommand { get; set; }\n\n        /// \u0026lt;summary\u0026gt;\n        /// \u5220\u9664\n        /// \u0026lt;/summary\u0026gt;\n        public RelayCommand\u0026lt;int\u0026gt; DeleteCommand { get; set; }\n\n        /// \u0026lt;summary\u0026gt;\n        /// \u65B0\u589E\n        /// \u0026lt;/summary\u0026gt;\n        public RelayCommand AddCommand { get; set; }\n\n        #endregion\n\n        public void Query()\n        {\n            List\u0026lt;Student\u0026gt; students;\n            if (string.IsNullOrEmpty(search))\n            {\n                students = localDb.Query();\n            }\n            else\n            {\n                students = localDb.QueryByName(search);\n            }\n\n            GridModelList = new ObservableCollection\u0026lt;Student\u0026gt;();\n            if (students != null)\n            {\n                students.ForEach((t) =\u0026gt;\n                {\n                    GridModelList.Add(t);\n                });\n            }\n        }\n\n        /// \u0026lt;summary\u0026gt;\n        /// \u91CD\u7F6E\n        /// \u0026lt;/summary\u0026gt;\n        public void Reset()\n        {\n            this.Search = string.Empty;\n            this.Query();\n        }\n\n        /// \u0026lt;summary\u0026gt;\n        /// \u7F16\u8F91\n        /// \u0026lt;/summary\u0026gt;\n        /// \u0026lt;param name=\u0026quot;Id\u0026quot;\u0026gt;\u0026lt;/param\u0026gt;\n        public void Edit(int Id)\n        {\n            var model = localDb.QueryById(Id);\n            if (model != null)\n            {\n                StudentWindow view = new StudentWindow(model);\n                var r = view.ShowDialog();\n                if (r.Value)\n                {\n                    var newModel = GridModelList.FirstOrDefault(t =\u0026gt; t.Id == model.Id);\n                    if (newModel != null)\n                    {\n                        newModel.Name = model.Name;\n                        newModel.Age = model.Age;\n                        newModel.Classes = model.Classes;\n                    }\n                    this.Query();\n                }\n            }\n        }\n\n        /// \u0026lt;summary\u0026gt;\n        /// \u5220\u9664\n        /// \u0026lt;/summary\u0026gt;\n        /// \u0026lt;param name=\u0026quot;Id\u0026quot;\u0026gt;\u0026lt;/param\u0026gt;\n        public void Delete(int Id)\n        {\n            var model = localDb.QueryById(Id);\n            if (model != null)\n            {\n                var r = MessageBox.Show($\u0026quot;\u786E\u5B9A\u8981\u5220\u9664\u5417\u3010{model.Name}\u3011\uFF1F\u0026quot;, \u0026quot;\u63D0\u793A\u0026quot;, MessageBoxButton.YesNo);\n                if (r == MessageBoxResult.Yes)\n                {\n                    localDb.DelStudent(Id);\n                    this.Query();\n                }\n            }\n        }\n\n        /// \u0026lt;summary\u0026gt;\n        /// \u65B0\u589E\n        /// \u0026lt;/summary\u0026gt;\n        public void Add()\n        {\n            Student model = new Student();\n            StudentWindow view = new StudentWindow(model);\n            var r = view.ShowDialog();\n            if (r.Value)\n            {\n                model.Id = GridModelList.Max(t =\u0026gt; t.Id) \u002B 1;\n                localDb.AddStudent(model);\n                this.Query();\n            }\n        }\n    }\n}\u003C/code\u003E\u003C/pre\u003E\u003Col start=\u00225\u0022 class=\u0022ne-ol\u0022\u003E\u003Cli id=\u0022uc84d591e\u0022 data-lake-index-type=\u00220\u0022\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(128, 0, 128)\u0022\u003E\u6570\u636E\u4E0A\u4E0B\u6587\u003C/span\u003E\u003C/li\u003E\u003C/ol\u003E\u003Cp id=\u0022u77a6e992\u0022 class=\u0022ne-p\u0022\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(0, 0, 0); font-size: 14px\u0022\u003E\u5F53\u5404\u4E2A\u5C42\u5206\u522B\u521B\u5EFA\u597D\u540E\uFF0C\u90A3\u5982\u4F55\u5173\u8054\u8D77\u6765\u5462\uFF1F\u7B54\u6848\u5C31\u662F\u003C/span\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(0, 0, 0); font-size: 14px; background-color: #74B602\u0022\u003EDataContext\u003C/span\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(0, 0, 0); font-size: 14px\u0022\u003E\u3010\u6570\u636E\u4E0A\u4E0B\u6587\u3011\u3002\u003C/span\u003E\u003C/p\u003E\u003Cp id=\u0022u21a23ae2\u0022 class=\u0022ne-p\u0022\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(0, 0, 0); font-size: 14px\u0022\u003E\u67E5\u8BE2\u9875\u9762\u4E0A\u4E0B\u6587\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A\u003C/span\u003E\u003C/p\u003E\u003Cpre data-language=\u0022csharp\u0022 id=\u0022ZKC1c\u0022 class=\u0022ne-codeblock language-csharp\u0022\u003E\u003Ccode\u003Eusing System.Windows;\nusing WpfMVVM.ViewModel;\n\nnamespace WpfMVVM\n{\n    /// \u0026lt;summary\u0026gt;\n    /// MainWindow.xaml \u7684\u4EA4\u4E92\u903B\u8F91\n    /// \u0026lt;/summary\u0026gt;\n    public partial class MainWindow : Window\n    {\n        public MainWindow()\n        {\n            InitializeComponent();\n            MainViewModel viewModel = new MainViewModel();\n            viewModel.Query();\n            this.DataContext = viewModel;\n        }\n    }\n}\u003C/code\u003E\u003C/pre\u003E\u003Cp id=\u0022u7d55551e\u0022 class=\u0022ne-p\u0022\u003E\u003Cspan class=\u0022ne-text\u0022 style=\u0022color: rgb(0, 0, 0); font-size: 14px\u0022\u003E\u65B0\u589E\u9875\u9762\u4E0A\u4E0B\u6587\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A\u003C/span\u003E\u003C/p\u003E\u003Cpre data-language=\u0022csharp\u0022 id=\u0022xGY5L\u0022 class=\u0022ne-codeblock language-csharp\u0022\u003E\u003Ccode\u003Eusing System.Windows;\nusing WpfMVVM.Models;\n\nnamespace WpfMVVM.Views\n{\n    /// \u0026lt;summary\u0026gt;\n    /// StudentWindow.xaml \u7684\u4EA4\u4E92\u903B\u8F91\n    /// \u0026lt;/summary\u0026gt;\n    public partial class StudentWindow : Window\n    {\n        public StudentWindow(Student student)\n        {\n            InitializeComponent();\n            this.DataContext = new\n            {\n                Model = student\n            };\n        }\n\n        private void btnSave_Click(object sender, RoutedEventArgs e)\n        {\n            this.DialogResult = true;\n        }\n\n        private void btnCancel_Click(object sender, RoutedEventArgs e)\n        {\n            this.DialogResult = false;\n        }\n    }\n}\u003C/code\u003E\u003C/pre\u003E\u003Ch1 id=\u0022RNSBL\u0022\u003E\u003Cspan class=\u0022ne-text\u0022\u003E\u793A\u4F8B\u622A\u56FE\u003C/span\u003E\u003C/h1\u003E\u003Cp id=\u0022u76b08740\u0022 class=\u0022ne-p\u0022\u003E\u003Cimg src=\u0022https://raw.githubusercontent.com/cadengao/cadengao.github.io/blog_file//doc/54197715.119594211/image/4.png\u0022 width=\u0022829\u0022 id=\u0022uc523f4b7\u0022 class=\u0022ne-image\u0022\u003E\u003C/p\u003E\u003Cp id=\u0022u4d507497\u0022 class=\u0022ne-p\u0022\u003E\u003Cimg src=\u0022https://raw.githubusercontent.com/cadengao/cadengao.github.io/blog_file//doc/54197715.119594211/image/5.png\u0022 width=\u0022829\u0022 id=\u0022u55091b00\u0022 class=\u0022ne-image\u0022\u003E\u003C/p\u003E\u003Ch1 id=\u0022Q9Buj\u0022\u003E\u003Cspan class=\u0022ne-text\u0022\u003E\u6E90\u7801\u003C/span\u003E\u003C/h1\u003E\u003Cdiv id=\u0022nxolX\u0022 class=\u0022ne-bookmark\u0022\u003E\u003Ca href=\u0022https://svn.coding.net/cadengao/dev/demo/WpfMVVM\u0022 target=\u0022_blank\u0022\u003Ehttps://svn.coding.net/cadengao/dev/demo/WpfMVVM\u003C/a\u003E\u003C/div\u003E\u003C/div\u003E",
  "Body": null,
  "CosUpdatedAt": "0001-01-01T00:00:00",
  "BodyHtmlCosUrl": null
}