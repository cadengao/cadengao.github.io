import{r as g,o as k,c as C,a as i,t as v,F as w,u as y,b as E}from"./index-mGBwZA9F.js";const I={__name:"Doc",setup(S){const l=y(),r=g(!1),m=()=>{const e=l.params.uuid||"aBWr8IRRj93bgz",a=l.params.protected||"false";return{shareId:e,isProtected:a}},u=()=>{const{shareId:e,isProtected:a}=m();let t=document.querySelector('meta[name="luki:share-id"]');const d=t;t&&t.remove(),t=document.createElement("meta"),t.name="luki:share-id",t.content=e,console.log("Updated shareId:",e),document.head.appendChild(t);let o=document.querySelector('meta[name="luki:password-protected"]');o&&o.remove(),o=document.createElement("meta"),o.name="luki:password-protected",o.content=a,document.head.appendChild(o);let c=document.querySelector('meta[name="luki:api-endpoint"]');c||(c=document.createElement("meta"),c.name="luki:api-endpoint",c.content="https://cadengao.craft.me/api",document.head.appendChild(c));let n=document.querySelector('meta[name="luki:override-static-asset-root"]');return n||(n=document.createElement("meta"),n.name="luki:override-static-asset-root",n.content="/craft",document.head.appendChild(n)),d},f=e=>new Promise(a=>{const t=["/craft/share/static/css/fontdef.r-11-gd9b659d.css","/craft/share/static/css/fontdef.r-24-g083f5a5.css","/craft/share/static/css/vendors~main.c3800cce.css","/craft/share/static/css/main.0e2f5845.css"];let d=0;t.forEach(n=>{const s=document.createElement("link");s.rel="stylesheet",s.href=n,s.onload=()=>{d++,d===t.length&&a()},document.head.appendChild(s)});const o=["/craft/share/static/js/vendors~main.533c931f.js","/craft/share/static/js/main.063840fd.js"];let c=0;o.forEach(n=>{const s=document.createElement("script");s.src=n,s.defer=!0,s.onload=()=>{c++,c===o.length&&(a(),e&&e())},document.body.appendChild(s)}),console.log("加载js")}),h=()=>{r.value=!r.value,document.documentElement.style.colorScheme=r.value?"dark":"light",localStorage.setItem("theme",r.value?"dark":"light")},p=()=>{const e=localStorage.getItem("theme")||"light";r.value=e==="dark",document.documentElement.style.colorScheme=r.value?"dark":"light"};return k(async()=>{p(),u()||await f(()=>{typeof window.initCraftDoc=="function"?window.initCraftDoc():console.error("window.initCraftDoc is not a function")}),console.log("initCraftDoc"),window.initCraftDoc&&window.initCraftDoc()}),(e,a)=>(E(),C(w,null,[i("button",{id:"theme-toggle",onClick:h,class:"theme-toggle-btn"},v(r.value?"☾":"☀"),1),a[0]||(a[0]=i("div",{class:"craft-doc-container craft-lake-content",style:{height:"100%"}},[i("div",{id:"root",style:{height:"100%"}})],-1))],64))}};export{I as default};
