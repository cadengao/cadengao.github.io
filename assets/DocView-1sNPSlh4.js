import{d as v,r as c,o as j,c as y,a as l,b as u,e as _,f as C,L as D}from"./index-Obx55YXR.js";const S={className:"doc-container"},E=v({name:"DocView",__name:"DocView",setup(b){const r=c(!0),i=c(new URLSearchParams(window.location.search)),m=c(i.value.get("uuid")||""),f=c(i.value.get("protected")==="true"),o=(a,e)=>{let t=document.querySelector(`meta[name="${a}"]`);t||(t=document.createElement("meta"),t.setAttribute("name",a),document.head.appendChild(t)),t.setAttribute("content",e)},h=async()=>{!document.querySelector('meta[name="luki:api-endpoint"]')&&o("luki:api-endpoint","https://pro.craft.me/api"),!document.querySelector('meta[name="luki:override-static-asset-root"]')&&o("luki:override-static-asset-root","/craft"),console.log("createFixedMetaTags done")},p=async()=>{const a=m.value||"aBWr8IRRj93bgz",e=f.value,t=a.replace(".json","");(e||!a.endsWith(".json"))&&localStorage.removeItem(`craft_${t}.json`),o("luki:share-id",t),o("luki:password-protected",`${e}`),console.log("Updated shareId:",a)},g=async()=>{const a=["/craft/share/static/css/fontdef.r-11-gd9b659d.css","/craft/share/static/css/fontdef.r-24-g083f5a5.css","/craft/share/static/css/vendors~main.c3800cce.css","/craft/share/static/css/main.0e2f5845.css","/craft/share/static/css/vendors~mathformula.156e0ea5.chunk.css"],e=["/craft/share/static/js/vendors~main.533c931f.js","/craft/share/static/js/main.063840fd.js","/craft/share/static/js/mathformula.5faa1eaa.chunk.js"],t=(w,n)=>Promise.all(w.map(d=>new Promise(k=>{const s=n==="css"?document.createElement("link"):document.createElement("script");n==="css"?(s.rel="stylesheet",s.href=d):(s.src=d,s.defer=!0),s.onload=()=>k(),document[n==="css"?"head":"body"].appendChild(s)})));await t(a,"css"),await t(e,"js"),console.log("loadExternalResources done")};return j(()=>{(async()=>{const e=document.querySelector('meta[name="luki:share-id"]');await p(),e||(await h(),await g()),window.initCraftDoc?(console.log("initCraftDoc found"),r.value=!1,window.initCraftDoc()):console.error("initCraftDoc function not found")})()}),(a,e)=>(l(),y("div",S,[e[0]||(e[0]=u("div",{class:"craft-doc-container craft-lake-content",style:{height:"100%"}},[u("div",{id:"root",style:{height:"100%",overflow:"hidden"}})],-1)),r.value?(l(),_(D,{key:0})):C("",!0)]))}});export{E as default};
