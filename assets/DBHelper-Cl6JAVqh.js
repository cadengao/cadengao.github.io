class u{static async fetchJson(a){try{console.log("fetch:"+a);const r=await fetch(a,{headers:{Accept:"application/json"},signal:AbortSignal.timeout?.(1e4)||(()=>{const s=new AbortController;return setTimeout(()=>s.abort(),1e4),s.signal})()});if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);return await r.json()}catch(r){throw console.error("Error fetching JSON:",r),r}}}class y{static async getCraftHomeJson(){const s=(await u.fetchJson("https://pro.craft.me/api/share/aBWr8IRRj93bgz")).blocks,i=s.find(t=>t.type==="objectList");if(!i)return[];let l={};try{const e=JSON.parse(i.objectData).schema;e&&e.properties&&e.properties.forEach(o=>{l[o.id]=o.name})}catch(t){return console.error("Error parsing schema:",t),[]}const p={};s.forEach(t=>{if(t.type==="text"&&t.blocks&&t.blocks.length>0){const e=t.blocks[0];p[e]=t.content}});const n=[];return(i.blocks||[]).forEach(t=>{const e=s.find(o=>o.id===t);if(e&&e.type==="object")try{const c=JSON.parse(e.objectData).properties||{},f={title:e.content||"",...Object.keys(l).reduce((h,b)=>(h[l[b]]=c[b]||"",h),{}),info:p[t]||""};f.uuid&&n.push(f)}catch(o){console.error(`Error parsing object ${t}:`,o)}}),n.sort((t,e)=>{const o=isNaN(t.index)||t.index===""?n.length:+t.index,c=isNaN(e.index)||e.index===""?n.length:+e.index;return o!==c?o-c:t.type<e.type?-1:t.type>e.type?1:0}),n}}export{y as default};
